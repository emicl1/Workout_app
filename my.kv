ScreenManager:
    id: outer_manager
    FirstScreen:
    LoginScreen:
    SignupScreen:
    ThisWeekWorkoutScreen:
    ClosestWorkoutScreen:
    ProfileScreen:
    SettingsScreen:


<DrawerClickableItem@MDNavigationDrawerItem>
    focus_color: "#f18c04"
    text_color: "#4a4939"
    icon_color: "#4a4939"
    ripple_color: "#f18c04"
    selected_color: "#f18c04"


<DrawerLabelItem@MDNavigationDrawerItem>
    text_color: "#4a4939"
    icon_color: "#4a4939"
    focus_behavior: False
    selected_color: "#0c6c4d"
    _no_ripple_effect: True

<ProfileScreen>:
    name: "profile"

    MDNavigationLayout:

        MDScreenManager:
            id: inner_manager
            MDScreen:
                name: "inner_profile"
                MDTopAppBar:
                    title: "Me"
                    elevation: 4
                    pos_hint: {"top": 1}
                    md_bg_color: "#f18c04"
                    specific_text_color: "#4a4939"
                    left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                    right_action_items: [["dots-vertical", lambda x: app.callback()]]

                MDLabel:
                    text: "Profile"
                    halign: "center"
                    theme_text_color: "Primary"
                    font_style: "H4"
                    pos_hint: {"center_x": .5, "center_y": .5}

                MDLabel:
                    id: profile_name
                    text: "Name: " + app.name
                    halign: "center"
                    theme_text_color: "Primary"
                    font_style: "H4"
                    pos_hint: {"center_x": .5, "center_y": .4}

            MDScreen:
                name: "closest_workout"

                MDTopAppBar:
                    title: "Closest workout"
                    elevation: 4
                    pos_hint: {"top": 1}
                    md_bg_color: "#f18c04"
                    specific_text_color: "#4a4939"
                    left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                    right_action_items: [["dots-vertical", lambda x: app.callback()]]
                MDLabel:
                    text: "Closest workout"
                    halign: "center"
                    theme_text_color: "Primary"
                    font_style: "H4"
                    pos_hint: {"center_x": .5, "center_y": .5}

            MDScreen:
                name: "this_week_workout"

                MDTopAppBar:
                    title: "Weekly workout"
                    elevation: 4
                    pos_hint: {"top": 1}
                    md_bg_color: "#f18c04"
                    specific_text_color: "#4a4939"
                    left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                    right_action_items: [["dots-vertical", lambda x: app.callback()]]
                MDLabel:
                    text: "This week workout"
                    halign: "center"
                    theme_text_color: "Primary"
                    font_style: "H4"
                    pos_hint: {"center_x": .5, "center_y": .5}

            MDScreen:
                name: "cardio_log"

                MDTopAppBar:
                    title: "Cardio log"
                    elevation: 4
                    pos_hint: {"top": 1}
                    md_bg_color: "#f18c04"
                    specific_text_color: "#4a4939"
                    left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                    right_action_items: [["dots-vertical", lambda x: app.callback()]]

                MDLabel:
                    text: "Cardio log"
                    halign: "center"
                    theme_text_color: "Primary"
                    font_style: "H4"
                    pos_hint: {"center_x": .5, "center_y": .5}


        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)

            MDNavigationDrawerMenu:

                MDNavigationDrawerHeader:
                    title: "Menu"
                    title_color: "#4a4939"
                    spacing: "5dp"
                    padding: "12dp", 0, 0, "56dp"

                DrawerClickableItem:
                    icon: "emoticon-cool"
                    text_right_color: "#4a4939"
                    text: "Me"
                    on_release: inner_manager.current = "inner_profile"

                DrawerClickableItem:
                    icon: "dumbbell"
                    text_right_color: "#4a4939"
                    text: "Closest workout"
                    on_release: inner_manager.current = "closest_workout"


                DrawerClickableItem:
                    icon: "calendar-week"
                    text: "weeks workout"
                    on_release: inner_manager.current = "this_week_workout"

                DrawerClickableItem:
                    icon: "run"
                    text_right_color: "#4a4939"
                    text: "Cardio log"
                    on_release: inner_manager.current = "cardio_log"

                MDNavigationDrawerDivider:

                DrawerClickableItem:
                    icon: "door-open"
                    text_right_color: "#4a4939"
                    text: "Logout"
                    on_release: app.logout()
<SignupScreen>:
    name: "signup"
    MDScreen:
        MDLabel:
            text: "Sign up"
            halign: "center"
            theme_text_color: "Custom"
            text_color: "#4a4939"
            font_style: "H4"
            pos_hint: {"center_y": .9}
        MDTextField:
            id: username
            hint_text: "Username"
            helper_text_mode: "on_focus"
            icon_right: "account"
            icon_right_color: "#4a4939"
            pos_hint: {"center_x": .5, "center_y": .8}
            size_hint_x: None
            width: 300
        MDTextField:
            id: password
            hint_text: "Password"
            color_mode: 'primary'
            password: True
            helper_text_mode: "on_error"
            helper_text_mode: "on_focus"
            icon_right: "lock"
            icon_right_color: "#4a4939"
            pos_hint: {"center_x": .5, "center_y": .7}
            size_hint_x: None
            width: 300
        MDTextField:
            id: password2
            hint_text: "Confirm password"
            password: True
            helper_text_mode: "on_error"
            icon_right: "lock"
            icon_right_color: "#4a4939"
            pos_hint: {"center_x": .5, "center_y": .6}
            size_hint_x: None
            width: 300
        MDTextField:
            id: bench
            hint_text: "Bench press PR"
            icon_right: "dumbbell"
            icon_right_color: "#4a4939"
            pos_hint: {"center_x": .5, "center_y": .5}
            size_hint_x: None
            width: 300
        MDTextField:
            id: squat
            hint_text: "Squat PR"
            icon_right: "food-drumstick"
            icon_right_color: "#4a4939"
            pos_hint: {"center_x": .5, "center_y": .4}
            size_hint_x: None
            width: 300
        MDTextField:
            id: deadlift
            hint_text: "Deadlift PR"
            icon_right: "account"
            icon_right_color: "#4a4939"
            pos_hint: {"center_x": .5, "center_y": .3}
            size_hint_x: None
            width: 300
        MDRaisedButton:
            text: "Sign up"
            pos_hint: {"center_x": .5, "center_y": .2}
            on_release: app.signup(username.text, password.text, password2.text, bench.text, squat.text, deadlift.text)
        MDRaisedButton:
            text: "Back"
            pos_hint: {"center_x": .5, "center_y": .1}
            on_release: app.root.current = "first"


<LoginScreen>:
    name: "login"
    MDScreen:
        MDLabel:
            text: "Login"
            halign: "center"
            theme_text_color: "Custom"
            text_color: "#4a4939"
            font_style: "H4"
            pos_hint: {"center_y": .9}
        MDTextField:
            id: username
            hint_text: "Username"
            color_mode: 'accent'
            icon_right: "account"
            icon_right_color: "#4a4939"
            pos_hint: {"center_x": .5, "center_y": .7}
            line_color_normal: app.theme_cls.accent_color
            size_hint_x: None
            width: 300

        MDTextField:
            id: password
            hint_text: "Password"
            color_mode: 'accent'
            helper_text: "Enter your password"
            color_mode: 'accent'
            password: True
            helper_text_mode: "on_focus"
            icon_right: "lock"
            icon_right_color: "#4a4939"
            line_color_normal: app.theme_cls.accent_color
            pos_hint: {"center_x": .5, "center_y": .6}
            size_hint_x: None
            width: 300
        MDRaisedButton:
            text: "Login"
            pos_hint: {"center_x": .5, "center_y": .5}
            md_bg_color: "#f18c04"
            on_release: app.login(username.text, password.text)
        MDRaisedButton:
            text: "Back"
            pos_hint: {"center_x": .5, "center_y": .4}
            md_bg_color: "#f18c04"
            on_release: app.root.current = "first"


<FirstScreen>:
    name: "first"

    MDScreen:
        MDLabel:
            text: "Welcome to the app"
            halign: "center"
            theme_text_color: "Custom"
            text_color: "#4a4939"
            font_style: "H4"
            pos_hint: {"center_y": .8}
        MDRaisedButton:

            text: "Login"
            pos_hint: {"center_x": .5, "center_y": .4}
            md_bg_color: "#f18c04"
            on_release: root.manager.current = "login"
        MDRaisedButton:
            text: "Sign up"
            pos_hint: {"center_x": .5, "center_y": .5}
            md_bg_color: "#f18c04"
            on_release: root.manager.current = "signup"


<SettingsScreen>:
    name: "settings"
    MDScreen:
        MDLabel:
            text: "Settings"
            halign: "center"
            theme_text_color: "Custom"
            text_color: "#4a4939"
            font_style: "H4"
            pos_hint: {"center_y": .9}
        MDRaisedButton:
            text: "Back"
            pos_hint: {"center_x": .5, "center_y": .5}
            md_bg_color: "#f18c04"
            on_release: root.manager.current = "profile"

